–í–æ—Ç –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ –≤—Å–µ–º —Ä–æ—É—Ç–∞–º —Ç–≤–æ–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –°–æ—Ö—Ä–∞–Ω–∏ –µ—ë –∫–∞–∫ **`API_DOCS.md`**.

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞: `http://localhost:8080`

---

# üìö HFT Trading System API Documentation

## 1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏ (Strategies)
–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å: `/api`

### üü¢ –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ö–æ–¥

#### 1. –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å.
*   **GET** `/api/strategies`

#### 2. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
–°–æ–∑–¥–∞–µ—Ç –ø–∞–ø–∫—É, –∫–æ–ø–∏—Ä—É–µ—Ç —à–∞–±–ª–æ–Ω—ã (`Cargo.toml`, `types.rs`) –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–¥.
*   **POST** `/api/strategies`
*   **Body:**
    ```json
    {
        "id": "logger_ffi",
        "code": "–ö–û–î_–°–¢–†–ê–¢–ï–ì–ò–ò_–ó–î–ï–°–¨"
    }
    ```

#### 3. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥
–ï—Å–ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–±–Ω–æ–≤–ª—è–µ—Ç `lib.rs`. –¢—Ä–µ–±—É–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º.
*   **PUT** `/api/strategies/:id/code`
*   **Body:**
    ```json
    {
        "code": "–ù–û–í–´–ô_–ö–û–î_–ó–î–ï–°–¨"
    }
    ```

#### 4. –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–¥, —Å—Ç–∞—Ç—É—Å –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ —Å–ø–∏—Å–æ–∫ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤.
*   **GET** `/api/strategies/:id`

#### 5. –£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –∏ —É–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª—ã —Å –¥–∏—Å–∫–∞.
*   **DELETE** `/api/strategies/:id`

### üü† –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –ó–∞–ø—É—Å–∫

#### 6. –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å
–ó–∞–ø—É—Å–∫–∞–µ—Ç `cargo build --release`. –≠—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —à–∞–≥ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º.
*   **POST** `/api/strategies/:id/compile`

#### 7. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Å—Ç–∞–Ω—Å (Start)
–ó–∞–≥—Ä—É–∂–∞–µ—Ç DLL, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. **–ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å API Key**, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç User Data Stream.
*   **POST** `/api/strategies/:id/start`
*   **Body:**
    ```json
    {
        "symbol": "BTCUSDT",
        "params": {
            "api_key": "YOUR_API_KEY",
            "secret_key": "YOUR_SECRET_KEY",
            "grid_step": 100,
            "qty": 0.001
        }
    }
    ```

#### 8. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
*   **POST** `/api/strategies/:id/stop`

#### 9. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–∏–º–≤–æ–ª
*   **POST** `/api/strategies/:id/stop/:symbol`
*   **–ü—Ä–∏–º–µ—Ä:** `/api/strategies/logger_ffi/stop/BTCUSDT`

---

## 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ò–Ω—Å—Ç–∞–Ω—Å–∞–º–∏ (Instances)
–†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏.

#### 1. –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å—ë, —á—Ç–æ —Å–µ–π—á–∞—Å —Ç–æ—Ä–≥—É–µ—Ç.
*   **GET** `/api/instances`

#### 2. –î–µ—Ç–∞–ª–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞
*   **GET** `/api/instances/:instance_id`
*   **ID —Ñ–æ—Ä–º–∞—Ç:** `StrategyID:SYMBOL` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `logger_ffi:BTCUSDT`)

#### 3. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ ID
*   **POST** `/api/instances/:instance_id/stop`

---

## 3. User Data Streams (–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å: `/api`

–£–ø—Ä–∞–≤–ª—è–µ—Ç WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤ –∏ –±–∞–ª–∞–Ω—Å–æ–≤.
*–û–±—ã—á–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –Ω–æ –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –≤—Ä—É—á–Ω—É—é.*

#### 1. –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä–∏–º–æ–≤
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ö–µ—à–∏ –∫–ª—é—á–µ–π –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–æ–±—ã—Ç–∏–π.
*   **GET** `/api/userdata/streams`

#### 2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Å—Ç—Ä–∏–º –≤—Ä—É—á–Ω—É—é
*   **POST** `/api/userdata/streams`
*   **Body:**
    ```json
    {
        "api_key": "YOUR_API_KEY",
        "secret_key": "YOUR_SECRET_KEY"
    }
    ```

#### 3. –û—Ç–∫–ª—é—á–∏—Ç—å —Å—Ç—Ä–∏–º
*   **DELETE** `/api/userdata/streams`
*   **Body:**
    ```json
    {
        "api_key": "YOUR_API_KEY",
        "secret_key": "YOUR_SECRET_KEY"
    }
    ```

---

## 4. –†—ã–Ω–æ—á–Ω—ã–µ –î–∞–Ω–Ω—ã–µ (Market Data)
–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å: `/` (–∫–æ—Ä–µ–Ω—å)

–ü–æ–¥–ø–∏—Å–∫–∞ —è–¥—Ä–∞ –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–µ –≤–µ–±—Å–æ–∫–µ—Ç—ã Binance.

#### 1. –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ BookTicker (–õ—É—á—à–∏–π –±–∏–¥/–∞—Å–∫)
*   **POST** `/subscribe/bookticker`
*   **Body:** `{"ticker": "BTCUSDT"}`

#### 2. –û—Ç–ø–∏—Å–∫–∞ –æ—Ç BookTicker
*   **POST** `/unsubscribe/bookticker`
*   **Body:** `{"ticker": "BTCUSDT"}`

#### 3. –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Trades (–°–¥–µ–ª–∫–∏)
*   **POST** `/subscribe/trades`
*   **Body:** `{"ticker": "BTCUSDT"}`

#### 4. –û—Ç–ø–∏—Å–∫–∞ –æ—Ç Trades
*   **POST** `/unsubscribe/trades`
*   **Body:** `{"ticker": "BTCUSDT"}`

---

## 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ (Execution)
–ü—Ä—è–º–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ä–¥–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ —è–¥—Ä–æ (–º–∏–Ω—É—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏). –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–ª—é—á–µ–π –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏.

#### 1. –¢–µ—Å—Ç–æ–≤—ã–π –æ—Ä–¥–µ—Ä
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –æ—Ä–¥–µ—Ä –Ω–∞ –±–∏—Ä–∂—É.
*   **POST** `/order/test`
*   **Body:**
    ```json
    {
        "api_key": "YOUR_API_KEY",
        "secret_key": "YOUR_SECRET_KEY",
        "symbol": "BTCUSDT",
        "price": 50000.0,
        "quantity": 0.001,
        "side": "BUY"
    }
    ```

#### 2. –û—Ç–º–µ–Ω–∞ –æ—Ä–¥–µ—Ä–∞
*   **POST** `/order/cancel`
*   **Body:**
    ```json
    {
        "api_key": "...",
        "secret_key": "...",
        "symbol": "BTCUSDT",
        "order_id": "123456789"
    }
    ```

#### 3. Ping Order (–ó–∞–º–µ—Ä Latency)
–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –ü–æ–ª—É—á–∞–µ—Ç —Ü–µ–Ω—É -> –°—Ç–∞–≤–∏—Ç –ª–∏–º–∏—Ç–∫—É -> –û—Ç–º–µ–Ω—è–µ—Ç –ª–∏–º–∏—Ç–∫—É -> –°—á–∏—Ç–∞–µ—Ç –≤—Ä–µ–º—è.
*   **GET** `/ping/order`
*   *(–ö–ª—é—á–∏ –¥–ª—è —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –∑–∞—à–∏—Ç—ã –≤ –∫–æ–¥–µ `main.rs` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `ping_order`, –ª–∏–±–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –º–µ—Ç–æ–¥, —á—Ç–æ–±—ã –æ–Ω –ø—Ä–∏–Ω–∏–º–∞–ª JSON).*

---

### üöÄ –¢–∏–ø–∏—á–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å (Workflow)

1.  **–°–æ–∑–¥–∞—Ç—å:** `POST /api/strategies` (—Å –∫–æ–¥–æ–º Logger).
2.  **–°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å:** `POST /api/strategies/logger_ffi/compile`.
3.  **–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ä—ã–Ω–æ–∫:** `POST /subscribe/bookticker` (BTCUSDT).
4.  **–ó–∞–ø—É—Å—Ç–∏—Ç—å:** `POST /api/strategies/logger_ffi/start` (—Å API Key).
5.  **–°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:** –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–µ—Ä–≤–µ—Ä–∞.
6.  **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:** `POST /api/strategies/logger_ffi/stop`.